<!doctype html><html lang=en><head><link rel=preconnect href=https://www.googletagmanager.com><link crossorigin rel=preconnect href=https://www.google-analytics.com><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-148413215-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=description content="Hi, I'm Jacky and welcome to my little corner of the internet! I'm interested in infrastructure (both community and software), cognitive systems, and ethical tech."><title>jacky zhao | interested in infrastructure, cognitive systems, and ethical tech</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=/res/logo.png><link rel=stylesheet href=https://unpkg.com/aos@next/dist/aos.css><meta property="og:url" content="https://jzhao.xyz"><meta property="og:title" content="jacky zhao | interested in infrastructure, cognitive systems, and ethical tech"><meta property="og:description" content="Hi, I'm Jacky and welcome to my little corner of the internet! I'm interested in infrastructure (both community and software), cognitive systems, and ethical tech."><meta property="og:image" content="https://jzhao.xyz/res/og-card.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="@_jzhao"><meta name=twitter:title content="jacky zhao | interested in infrastructure, cognitive systems, and ethical tech"><meta name=twitter:description content="Hi, I'm Jacky and welcome to my little corner of the internet! I'm interested in infrastructure (both community and software), cognitive systems, and ethical tech."><meta name=twitter:image content="https://jzhao.xyz/res/og-card.png"><noscript><style type=text/css>[data-aos]{opacity:1!important;transform:translate(0)scale(1)!important}h1>span.word.col1{opacity:1}.accordion-panel{display:block!important}</style></noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Sans+Pro:wght@400;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><style>:root{--light: #faf8f8;--dark: #141021;--navy: #284b63;--olive: #84a59d;--visited: #afbfc9;--salmon: #f28482;--gray: #4e4e4e;--lightgray: #f0f0f0;--outlinegray: #dadada;--lt-colours-light: var(--light) !important;--lt-colours-lightgray: var(--lightgray) !important;--lt-colours-dark: var(--navy) !important;--lt-colours-secondary: var(--olive) !important;--lt-colours-gray: var(--outlinegray) !important;--invert-filter: invert(0) hue-rotate(0)}h1,h2,h3,h4,ol,ul,thead{font-family:Inter;color:var(--dark)}p,ul{font-family:source sans pro,sans-serif;color:var(--gray)}pre{font-family:fira code;padding:.75em;border-radius:3px;overflow-x:scroll}code{font-family:fira code;font-size:.85em;padding:.15em .3em;border-radius:5px;background:var(--lightgray)}[saved-theme=dark]{--light: #1e1e21 !important;--dark: #fbfffe !important;--navy: #75a1bf !important;--visited: #4a575e !important;--olive: #84a59d !important;--salmon: #f58382 !important;--gray: #d4d4d4 !important;--lightgray: #292633 !important;--outlinegray: #343434 !important;--invert-filter: invert(97%) hue-rotate(190deg) grayscale(0.4) contrast(90%) brightness(1.2) !important}html{scroll-behavior:smooth}body{margin:0;height:100vh;width:100vw;overflow-x:hidden;background-color:var(--light)}.hover{color:var(--dark);text-decoration:none;opacity:.6;z-index:1;transition:200ms}.hover::after{transition:200ms;height:18px;content:"";position:absolute;background-color:var(--olive);opacity:.5;z-index:-1;width:0%;right:5px;bottom:5px}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}footer{margin-top:4em}footer>a{font-family:inter;font-weight:700;font-size:1em;color:var(--navy);padding:0 .5em 3em}#newsletter{margin:2em 0}#newsletter>input{padding:.7em 1em;border-radius:4px}#newsletter>input[type=submit]{border:none;color:var(--light);background-color:var(--navy);cursor:pointer}#newsletter>input[type=email]{background-color:var(--light);border:1px solid var(--outlinegray);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}hr{width:25%;margin:4em auto;height:2px;border-radius:1px;border-width:0;color:var(--dark);background-color:var(--dark)}</style><style>.darkmode{padding:2em;animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:2s}h1{font-size:4em;margin-bottom:0}h2{font-size:3em}h3{margin:0;font-size:1em}a{color:var(--olive);transition:all .2s ease}ul{margin-top:0;padding-left:1.5em}p,ul{display:block;font-size:1.1em;line-height:1.2}.lt-card{margin:0!important;padding:0 0 0 1em!important}#landing-container{position:relative;width:100vw;height:100vh}#landing-container>#landing-overlay{position:absolute;z-index:9999!important;background-color:#0000!important;top:30%;height:60%}@media all and (max-width:450px){#landing-container>#landing-overlay{overflow:hidden;left:10vw!important;padding:0}}#landing-container>canvas{position:absolute;width:100vw;height:100vh}#main-landing>h1{animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:.4s}@media all and (max-width:450px){#main-landing>h1:nth-child(2){margin-top:15vh}}#main-landing>ul>li:nth-child(1){animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:1.3s}#main-landing>ul>li:nth-child(2){animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:1.4s}#main-landing>ul>li:nth-child(3){animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:1.5s}#main-landing>ul>li:nth-child(4){animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:1.6s}#sub-nav{list-style:none;padding-left:0;margin:0}#sub-nav>li{display:inline-block;font-family:inter,monospace;font-size:1em;padding-top:.5em;font-weight:400;color:var(--dark)}#sub-nav>li>a{padding-right:.5em}.col1{color:var(--dark)}.col2{color:var(--navy)}.col3{color:var(--olive)}.col4{color:var(--salmon)}.rotating-text{overflow:hidden;animation:fadeIn ease .6s;opacity:0;animation-fill-mode:forwards;animation-delay:.8s}@media all and (max-width:450px){.rotating-text{height:2em}}.rotating-text>h1{display:inline-flex;margin:0;vertical-align:top}.rotating-text>h1>.word{position:absolute;display:flex;opacity:0;overflow:hidden;padding-bottom:.12em}.rotating-text>h1>.word>.letter{transform-origin:center center .8em}.rotating-text>h1>.word>.letter.out{transform:rotateX(90deg);transition:.32s cubic-bezier(0.6,0,0.7,0.2)}.rotating-text>h1>.word>.letter.in{transition:.32s ease}.rotating-text>h1>.word>.letter.behind{transform:rotateX(-90deg)}.ext-ref{display:block;margin-left:1.5em;font-weight:700;font-family:inter}ul.lt-hl{font-family:source sans pro;margin-bottom:1em}#bio .lt-flex-50>h2{font-size:1.25em;margin:0}.highlight-container{overflow-x:visible}.highlight-container>.highlight{margin-bottom:2em}.detail-container{margin-left:3em;flex:0 0 calc(50% - 3em)!important;position:relative}@media all and (max-width:1440px){.detail-container{margin-left:0!important}}.detail-container>ul{list-style:none;font-size:1em;padding:1em 0}.detail-container>ul>li{display:flex;flex-direction:row;align-items:center;justify-content:space-between}#about:hover .me,#about:hover .deco,#about:hover .highlight-container{filter:grayscale(0%)}#about p:first-of-type{margin-top:0}body[data-aos-easing=custom] [data-aos],[data-aos][data-aos][data-aos-easing=custom]{transition-timing-function:cubic-bezier(0.25,0.8,0.25,1)}.gh-chart{filter:var(--invert-filter);width:100%;margin-bottom:2em}.singlePage h1{font-size:3rem}.singlePage h2{font-size:1.8rem;opacity:.8}.singlePage h3{font-size:1.2rem;opacity:.7}</style><style>@media(prefers-reduced-motion:no-preference){.lt-content-column:hover h2 .hover{opacity:1}.lt-content-column:hover h2 .hover::after{width:100%}.lt-content-column:hover .side-header::before{width:180px}}.side-header-container{margin-top:2em}.side-header{position:absolute;opacity:.3;font-size:.8em;transition:opacity 2s cubic-bezier(0.25,0.8,0.25,1);transform-origin:top left;transform:translateX(-2em)rotateZ(90deg)rotateZ(180deg)translateX(-100%)}.side-header::before{height:100%;position:absolute;width:0;display:inline-block;transform:translateY(-0.5em);border-bottom:3px solid var(--gray);color:var(--gray);transition:all .3s cubic-bezier(0.25,0.8,0.25,1);transition-delay:.1s;content:'';right:calc(100% + 0.5em)}</style><style>.lt-card{padding:.25em 1em;margin:.5em 0;border-radius:5px;background-color:var(--lt-colours-light);border:1px solid var(--lt-colours-gray)}.lt-hover{transition:all .5s cubic-bezier(0.25,0.8,0.25,1)}.lt-hover:hover{box-shadow:0 14px 28px rgba(27,33,48,.18),0 10px 10px rgba(27,33,48,.16)!important}.lt-shadow{box-shadow:0 14px 28px rgba(27,33,48,.06),0 10px 10px rgba(27,33,48,.02)}ul.lt-hl{list-style:none;padding:0}ul.lt-hl>li{display:inline-block;border-style:none;font-size:.9em;margin-right:3px;padding:.3rem;border-radius:2px;color:var(--lt-colours-light);background-color:var(--lt-colours-secondary);margin-bottom:.2em}.lt-flex-col{display:flex;flex-direction:column}.lt-flex-row{display:flex;flex-direction:row}.lt-content-column{padding:20px 20vw}.lt-centre{text-align:center}.lt-flex-50{flex:0 0 50%}.lt-flex-25{flex:0 0 25%}.lt-flex-33{flex:0 0 33%}.lt-flex-66{flex:0 0 66%}.lt-flex-centre{justify-content:center}</style><style>@media screen and (max-width:1440px){.short-desc{display:None}#bio .lt-flex-row{flex-direction:column!important}}</style><style>.lang_bar{position:relative;flex:0 0 .8em;float:right}@media all and (max-width:450px){.lang_bar{flex:0 0 .6em!important}}.lang_bar>.bar_container{border-top-right-radius:4px;border-bottom-right-radius:4px;overflow:hidden;height:100%;z-index:10}.lang_bar>.tooltiptext{font-family:source sans pro,sans-serif;white-space:nowrap;visibility:hidden;opacity:0;color:var(--dark);text-align:center;border-radius:3px;writing-mode:vertical-rl;text-orientation:mixed;position:absolute;top:50%;transform:translate(5em,-50%);z-index:1;transition:all .2s ease}@media all and (max-width:450px){.lang_bar>.tooltiptext{display:None}}.lang_bar:hover>.tooltiptext{visibility:visible;opacity:1;margin-left:-2em}</style><style>ul.project_list{padding:0}.accordion{margin:1rem 0;padding:0;list-style:none}.accordion .accordion-arrow{float:right;height:7px;min-width:7px;margin-right:1rem;margin-left:auto;vertical-align:middle;border-right:2px solid;border-bottom:2px solid;border-color:var(--dark);transform:rotate(45deg)translateY(0.25em);transition:transform .2s ease-in-out}.accordion .accordion_body.is-active .accordion-arrow{transform:rotateX(180deg)rotateZ(45deg)translateY(-3.5px)translateX(-7px)}.accordion .accordion_body{width:100%;padding:1.3em .5em}@media all and (max-width:450px){.accordion .accordion_body{padding:.8em!important}}.accordion .accordion_body>.accordion-panel{display:none}.accordion .accordion_body>.accordion-panel ul.lt-hl{margin:0}.accordion .accordion_body>.proj_desc>.accordion-arrow{margin-left:.5em}.accordion .accordion_body>.proj_desc>a{font-family:inter;font-weight:700;font-size:.9em;color:var(--navy);padding-right:1em}@media all and (max-width:450px){.accordion .accordion_body>.proj_desc>a{padding-right:.5em!important;font-size:.7em!important;transform:translateY(0.15em)}}.accordion .accordion_body>.proj_desc>.project-title{white-space:nowrap;font-family:inter;font-weight:600;padding-right:.3em}.accordion .accordion_body>.proj_desc>.short-desc{width:auto!important;font-family:source sans pro;font-size:1em;white-space:nowrap;margin:0}.accordion .accordion_body>.proj_desc>.spacer{flex:25%}.accordion .accordion_body>.job-info>.company-logo{width:40px;height:40px;border-radius:3px;margin-right:1em}@media all and (max-width:450px){.accordion .accordion_body>.job-info>.company-logo{width:30px!important;height:30px!important}}.accordion .accordion_body>.job-info>.accordion-arrow{margin-top:1em}@media all and (max-width:450px){.accordion .accordion_body>.job-info>.accordion-arrow{margin-top:.5em}}.accordion .accordion_body>.job-info h2{font-weight:600;font-size:1.2em;font-family:inter;margin:0}@media all and (max-width:450px){.accordion .accordion_body>.job-info h2{font-size:1em;transform:translateY(0.2em)}}.accordion .accordion_body>.job-info p{font-weight:400;color:var(--gray);font-size:.9em;font-family:inter;margin:0}@media all and (max-width:450px){.accordion .accordion_body>.job-info p{display:none}}</style><style>.mobile-only{display:None}@media all and (max-width:450px){.mobile-only{display:inline-block!important}h1{font-size:2em!important}h3{font-size:1em!important}p{font-size:1em!important}.mobile-hide{display:None!important}#about,#experience,#projects{padding:0 5vw 30px!important}}</style><style>.darkmode{text-align:right}.darkmode>.toggle{display:none;box-sizing:border-box}.darkmode>.toggle:checked+.toggle-button:after{left:50%}.darkmode>.toggle+.toggle-button{box-sizing:border-box;outline:0;display:inline-block;width:3em;height:1.5em;position:relative;cursor:pointer;border:2px solid var(--gray);user-select:none;padding:2px;transition:all .2s ease;border-radius:2em}.darkmode>.toggle+.toggle-button:after,.darkmode>.toggle+.toggle-button:before{position:relative;display:block;box-sizing:border-box;content:"";width:50%;height:100%}.darkmode>.toggle+.toggle-button:before{display:none}.darkmode>.toggle+.toggle-button:after{left:0;transition:all .2s ease;background:var(--gray);content:"";border-radius:1em}.darkmode #dayIcon{position:relative;width:20px;height:20px;top:-1.5px;margin:0 7px;fill:var(--gray)}.darkmode #nightIcon{position:relative;width:18px;height:18px;top:-2px;margin:0 7px;fill:var(--gray)}</style><style>.chroma{color:#f8f8f2;background-color:#282a36}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#ff79c6}.chroma .kc{color:#ff79c6}.chroma .kd{color:#8be9fd;font-style:italic}.chroma .kn{color:#ff79c6}.chroma .kp{color:#ff79c6}.chroma .kr{color:#ff79c6}.chroma .kt{color:#8be9fd}.chroma .na{color:#50fa7b}.chroma .nb{color:#8be9fd;font-style:italic}.chroma .nc{color:#50fa7b}.chroma .nf{color:#50fa7b}.chroma .nl{color:#8be9fd;font-style:italic}.chroma .nt{color:#ff79c6}.chroma .nv{color:#8be9fd;font-style:italic}.chroma .vc{color:#8be9fd;font-style:italic}.chroma .vg{color:#8be9fd;font-style:italic}.chroma .vi{color:#8be9fd;font-style:italic}.chroma .s{color:#f1fa8c}.chroma .sa{color:#f1fa8c}.chroma .sb{color:#f1fa8c}.chroma .sc{color:#f1fa8c}.chroma .dl{color:#f1fa8c}.chroma .sd{color:#f1fa8c}.chroma .s2{color:#f1fa8c}.chroma .se{color:#f1fa8c}.chroma .sh{color:#f1fa8c}.chroma .si{color:#f1fa8c}.chroma .sx{color:#f1fa8c}.chroma .sr{color:#f1fa8c}.chroma .s1{color:#f1fa8c}.chroma .ss{color:#f1fa8c}.chroma .m{color:#bd93f9}.chroma .mb{color:#bd93f9}.chroma .mf{color:#bd93f9}.chroma .mh{color:#bd93f9}.chroma .mi{color:#bd93f9}.chroma .il{color:#bd93f9}.chroma .mo{color:#bd93f9}.chroma .o{color:#ff79c6}.chroma .ow{color:#ff79c6}.chroma .c{color:#6272a4}.chroma .ch{color:#6272a4}.chroma .cm{color:#6272a4}.chroma .c1{color:#6272a4}.chroma .cs{color:#6272a4}.chroma .cp{color:#ff79c6}.chroma .cpf{color:#ff79c6}.chroma .gd{color:#8b080b}.chroma .ge{text-decoration:underline}.chroma .gh{font-weight:700}.chroma .gi{font-weight:700}.chroma .go{color:#44475a}.chroma .gu{font-weight:700}.chroma .gl{text-decoration:underline}.lntd:first-of-type>.chroma{padding-right:0}.chroma code{font-family:fira code!important;font-size:.85em;line-height:1em;background:0 0;padding:0}.chroma{border-radius:3px;margin:0}</style></head><body><div class=darkmode><label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06L6.439 8.561zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label class=toggle-button for=darkmode-toggle></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div><div class="lt-content-column singlePage"><h1>DSCI 100</h1><h1 id=textbook-notes>Textbook Notes</h1><p><strong>classification →</strong> i.e., predicting a categorical class (sometimes called a label) for an observation given its other quantitative variables (sometimes called features).</p><p><strong>“training set”:</strong> because we use these observations to train, or teach, our classifier so that we can use it to make predictions on new data that we have not seen previously.</p><p><strong>class imbalance →</strong> when one label is much more common than another. For the present purposes, it will suffice to rebalance the data by oversampling the rare class. In other words, we will replicate rare observations multiple times in our data set to give them more voting power in the K-nearest neighbour algorithm.</p><p><strong>prediction accuracy →</strong> This is the fraction of examples for which the classifier made the correct prediction</p><p><strong>underfit</strong> <strong>→</strong> if the model isn’t influenced enough by the training data, it is said to underfit the data. (in KNN this happens when K large)</p><p><strong>overfit →</strong> if the model is influenced too much by the training data, it is said to overfit the data. (in KNN this happens when K small)</p><p><strong>regression →</strong> Regression, like classification, is a predictive problem setting where we want to use past information to predict future observations. But in the case of regression, the goal is to predict numerical values instead of class labels.</p><p>Use <code>scale</code> for multivariate data (for KNN)</p><p>Use <code>as.factor()</code> for labels when doing classification</p><p><strong>Strengths of k-nn regression</strong></p><ol><li>Simple and easy to understand</li><li>No assumptions about what the data must look like</li><li>Works well with non-linear relationships (i.e., if the relationship is not a straight line)</li></ol><p><strong>Limitations of k-nn regression</strong></p><ol><li>As data gets bigger and bigger, k-nn gets slower and slower, quite quickly</li><li>Does not perform well with a large number of predictors unless the size of the training set is exponentially larger</li><li>Does not predict well beyond the range of values input in your training data</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># accuracy plot</span>
<span class=n>accuracies</span> <span class=o>&lt;-</span> <span class=n>model</span><span class=o>$</span><span class=n>results</span> <span class=c1># where model is the result of train()</span>
<span class=n>accuracy_vs_k</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>accuracies</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>k</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>Accuracy</span><span class=p>))</span> <span class=o>+</span>
  <span class=nf>geom_point</span><span class=p>()</span> <span class=o>+</span>
  <span class=nf>geom_line</span><span class=p>()</span>
<span class=n>accuracy_vs_k</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=n>Y_test_predicted</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>object</span> <span class=o>=</span> <span class=n>model_knn</span><span class=p>,</span> <span class=n>X_test</span><span class=p>)</span>
<span class=n>model_quality</span> <span class=o>&lt;-</span> <span class=nf>confusionMatrix</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>Y_test_predicted</span><span class=p>,</span> <span class=n>reference</span> <span class=o>=</span> <span class=n>Y_test</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># upsampling example</span>
<span class=n>rare_cancer</span> <span class=o>&lt;-</span> <span class=nf>upSample</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=nf>select</span><span class=p>(</span><span class=n>rare_cancer</span><span class=p>,</span> <span class=n>Perimeter</span><span class=p>,</span> <span class=n>Concavity</span><span class=p>),</span>
            <span class=n>y</span> <span class=o>=</span> <span class=nf>select</span><span class=p>(</span><span class=n>rare_cancer</span><span class=p>,</span> <span class=n>Class</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=nf>unlist</span><span class=p>())</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>forcats</span><span class=p>)</span> <span class=c1># helps to manipulate factors in r</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># top 5 closest things</span>
<span class=n>new_obs</span> <span class=o>&lt;-</span> <span class=nf>data.frame</span><span class=p>(</span><span class=o>&lt;</span><span class=n>COL_1</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>etc.</span><span class=p>)</span>

<span class=n>dataset</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>COL_NAMES</span><span class=o>&gt;</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>mutate</span><span class=p>(</span><span class=n>dist_from_new</span> <span class=o>=</span> <span class=nf>sqrt</span><span class=p>((</span><span class=o>&lt;</span><span class=n>COL_1</span><span class=o>&gt;</span> <span class=o>-</span> <span class=n>new_obs</span><span class=o>$&lt;</span><span class=n>COL_1</span><span class=o>&gt;</span><span class=p>)</span><span class=n>^2</span>  <span class=o>+</span> <span class=p>(</span><span class=o>&lt;</span><span class=n>COL_2</span><span class=o>&gt;</span> <span class=o>-</span> <span class=n>newobs</span><span class=o>$&lt;</span><span class=n>COL_2</span><span class=o>&gt;</span><span class=p>)</span><span class=n>^2</span><span class=p>))</span> <span class=o>%&gt;%</span> 
  <span class=nf>arrange</span><span class=p>(</span><span class=n>dist_from_new</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>head</span><span class=p>(</span><span class=n>n</span> <span class=o>=</span> <span class=m>5</span><span class=p>)</span> <span class=c1># choose top n</span>
</code></pre></td></tr></table></div></div><h2 id=types-of-ml>Types of ML</h2><p><strong>supervised learning</strong> → data has labels with a predictive target (class or value) and will use this data to help make predictions on unseen data</p><p>classification → predicting target class</p><p>regression → prediction some numerical value</p><p><strong>unsupervised learning</strong> → give unlabelled data, find structure or patterns in the data</p><p>clustering → grouping similar data together</p><p>useful for EDA / developing new questions about the data / and using subgroups to improve models</p><p>within-cluster-sum-of-squared-distances (WSSD) → for each group</p><ol><li>compute the center/mean of that group</li><li>compute distance from mean to every point</li><li>square then add them all together</li></ol><p>total WSSD → add all the WSSD for each cluster</p><h2 id=common-operations>Common Operations</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># splitting dataset (e.g. 60% split)</span>
<span class=n>training_rows</span> <span class=o>&lt;-</span> <span class=n>dataset</span> <span class=o>%&gt;%</span> 
	<span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>SOME_COL</span><span class=o>&gt;</span><span class=p>)</span> <span class=o>%&gt;%</span>
  <span class=nf>unlist</span><span class=p>()</span> <span class=o>%&gt;%</span>
  <span class=nf>createDataPartition</span><span class=p>(</span><span class=n>p</span> <span class=o>=</span> <span class=m>0.6</span><span class=p>,</span> <span class=n>list</span> <span class=o>=</span> <span class=kc>FALSE</span><span class=p>)</span>

<span class=n>train</span> <span class=o>&lt;-</span> <span class=n>dataset</span> <span class=o>%&gt;%</span>
	<span class=nf>slice</span><span class=p>(</span><span class=n>training_rows</span><span class=p>)</span>
<span class=n>test</span> <span class=o>&lt;-</span> <span class=n>dataset</span> <span class=o>%&gt;%</span>
	<span class=nf>slice</span><span class=p>(</span><span class=o>-</span><span class=n>training_rows</span><span class=p>)</span>

<span class=n>X_train</span> <span class=o>&lt;-</span> <span class=n>train</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>TRAIN_COLS</span><span class=o>&gt;</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=nf>data.frame</span><span class=p>()</span>
<span class=n>X_test</span> <span class=o>&lt;-</span> <span class=n>test</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>TRAIN_COLS</span><span class=o>&gt;</span><span class=p>)</span>
<span class=n>Y_train</span> <span class=o>&lt;-</span> <span class=n>train</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>PRED_COLS</span><span class=o>&gt;</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=nf>unlist</span><span class=p>()</span>
<span class=n>Y_test</span> <span class=o>&lt;-</span> <span class=n>test</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>&lt;</span><span class=n>PRED_COLS</span><span class=o>&gt;</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=nf>unlist</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># ggpairs scatterplot of all the columns we are interested in including in our model</span>
<span class=nf>options</span><span class=p>(</span><span class=n>repr.plot.height</span> <span class=o>=</span> <span class=m>4</span><span class=p>,</span> <span class=n>repr.plot.width</span> <span class=o>=</span> <span class=m>10</span><span class=p>)</span>
<span class=n>pairs_plot</span> <span class=o>&lt;-</span> <span class=nf>ggpairs</span><span class=p>(</span><span class=n>train</span><span class=p>,</span> <span class=n>mapping</span> <span class=o>=</span> <span class=nf>aes</span><span class=p>(</span><span class=n>alpha</span> <span class=o>=</span> <span class=m>0.4</span><span class=p>))</span>

<span class=c1># (textbook method)</span>
<span class=n>pairs_plot</span> <span class=o>&lt;-</span> <span class=n>dataset</span> <span class=o>%&gt;%</span> 
    <span class=nf>slice</span><span class=p>(</span><span class=n>training_rows</span><span class=p>)</span> <span class=o>%&gt;%</span> 
    <span class=nf>ggpairs</span><span class=p>(</span><span class=n>mapping</span> <span class=o>=</span> <span class=nf>aes</span><span class=p>(</span><span class=n>alpha</span> <span class=o>=</span> <span class=m>0.4</span><span class=p>))</span>

</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># fitting a linear regression model</span>
<span class=n>lm_model</span> <span class=o>&lt;-</span> <span class=nf>train</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>X_train</span><span class=p>,</span> 
                      <span class=n>y</span> <span class=o>=</span> <span class=n>Y_train</span><span class=p>,</span> 
                      <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;lm&#34;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># table of regression slopes/coefficients</span>
<span class=n>lm_coeffs</span> <span class=o>&lt;-</span> <span class=n>lm_model</span><span class=o>$</span><span class=n>finalModel</span><span class=o>$</span><span class=n>coefficients</span> <span class=o>%&gt;%</span> <span class=c1># select coefficients from final model</span>
    <span class=nf>t</span><span class=p>()</span> <span class=o>%&gt;%</span> <span class=c1># transpose</span>
    <span class=nf>data.frame</span><span class=p>()</span> <span class=c1># back to df</span>
<span class=nf>colnames</span><span class=p>(</span><span class=n>lm_coeffs</span><span class=p>)</span><span class=n>[1]</span> <span class=o>&lt;-</span> <span class=s>&#34;Intercept&#34;</span> <span class=c1># rename col</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># RMSE (root mean squared error) -&gt; calculated on X_train / Y_train</span>
<span class=n>train_pred</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>lm_model</span><span class=p>,</span> <span class=n>X_train</span><span class=p>)</span>
<span class=n>lm_modelvalues</span> <span class=o>&lt;-</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>obs</span> <span class=o>=</span> <span class=n>Y_train</span><span class=p>,</span> <span class=n>pred</span> <span class=o>=</span> <span class=n>train_pred</span><span class=p>)</span>
<span class=n>lm_rmse</span> <span class=o>&lt;-</span> <span class=nf>defaultSummary</span><span class=p>(</span><span class=n>lm_modelvalues</span><span class=p>)</span><span class=n>[[1]]</span>

<span class=c1># RMSPE (root mean squared prediction error) -&gt; calculated on X_test / Y_test</span>
<span class=n>test_pred</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>lm_model</span><span class=p>,</span> <span class=n>X_test</span><span class=p>)</span>
<span class=n>lm_modelvalues</span> <span class=o>&lt;-</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>obs</span> <span class=o>=</span> <span class=n>Y_test</span><span class=p>,</span> <span class=n>pred</span> <span class=o>=</span> <span class=n>test_pred</span><span class=p>)</span>
<span class=n>lm_rmspe</span> <span class=o>&lt;-</span> <span class=nf>defaultSummary</span><span class=p>(</span><span class=n>lm_modelvalues</span><span class=p>)</span><span class=n>[[1]]</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># knn version</span>

<span class=c1># compute/apply scaling and shifting</span>
<span class=n>scale_transformer</span> <span class=o>&lt;-</span> <span class=nf>preProcess</span><span class=p>(</span><span class=n>X_train</span><span class=p>,</span> <span class=n>method</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;center&#34;</span><span class=p>,</span> <span class=s>&#34;scale&#34;</span><span class=p>))</span> 
<span class=n>X_train</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>scale_transformer</span><span class=p>,</span> <span class=n>X_train</span><span class=p>)</span>
<span class=n>X_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>scale_transformer</span><span class=p>,</span> <span class=n>X_test</span><span class=p>)</span>

<span class=c1>#train knn model using 5-fold CV</span>
<span class=n>train_control</span> <span class=o>&lt;-</span> <span class=nf>trainControl</span><span class=p>(</span><span class=n>method</span> <span class=o>=</span> <span class=s>&#34;cv&#34;</span><span class=p>,</span> <span class=n>number</span> <span class=o>=</span> <span class=m>5</span><span class=p>)</span> <span class=c1># n-fold CV</span>
<span class=n>k_lots</span> <span class=o>=</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=nf>seq</span><span class=p>(</span><span class=n>from</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span> <span class=n>to</span> <span class=o>=</span> <span class=m>20</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span> <span class=c1># define which Ks</span>
<span class=n>knn_reg_cv_5</span> <span class=o>&lt;-</span> <span class=nf>train</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>X_train</span><span class=p>,</span> 
                      <span class=n>y</span> <span class=o>=</span> <span class=n>Y_train</span><span class=p>,</span> 
                      <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;knn&#34;</span><span class=p>,</span> 
                      <span class=n>tuneGrid</span> <span class=o>=</span> <span class=n>k_lots</span><span class=p>,</span> 
                      <span class=n>trControl</span> <span class=o>=</span> <span class=n>train_control</span><span class=p>)</span>

<span class=c1># get best k with lowest RMSE</span>
<span class=n>best_k</span> <span class=o>=</span> <span class=n>knn_reg_cv_5</span><span class=o>$</span><span class=n>results</span> <span class=o>%&gt;%</span> 
    <span class=nf>arrange</span><span class=p>(</span><span class=n>RMSE</span><span class=p>)</span> <span class=o>%&gt;%</span> 
    <span class=nf>slice</span><span class=p>(</span><span class=m>1</span><span class=p>)</span> <span class=o>%&gt;%</span> 
    <span class=nf>select</span><span class=p>(</span><span class=n>k</span><span class=p>)</span>

<span class=c1>#retrain the model using that final k, predict on held-out data</span>
<span class=n>knn_mult_reg_final</span> <span class=o>&lt;-</span> <span class=nf>train</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>X_train</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>Y_train</span><span class=p>,</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;knn&#34;</span><span class=p>,</span> <span class=n>tuneGrid</span> <span class=o>=</span> <span class=n>best_k</span><span class=p>)</span>
<span class=n>test_pred</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>knn_mult_reg_final</span><span class=p>,</span> <span class=n>X_test</span><span class=p>)</span>
<span class=n>modelvalues</span> <span class=o>&lt;-</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>obs</span> <span class=o>=</span> <span class=n>Y_test</span><span class=p>,</span> <span class=n>pred</span> <span class=o>=</span> <span class=n>test_pred</span><span class=p>)</span>
<span class=n>knn_mult_test_results</span> <span class=o>&lt;-</span> <span class=nf>defaultSummary</span><span class=p>(</span><span class=n>modelvalues</span><span class=p>)</span>
<span class=n>knn_rmspe</span> <span class=o>&lt;-</span> <span class=n>knn_mult_test_results[[1]]</span>
</code></pre></td></tr></table></div></div><h2 id=r-documentation>R Documentation</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># unlist</span>
<span class=c1># flattens something</span>
<span class=n>vector</span> <span class=o>&lt;-</span> <span class=n>db</span> <span class=o>%&gt;%</span> <span class=nf>unlist</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># mutate</span>
<span class=c1># adds a new variable based on prev variables</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>mutate</span><span class=p>(</span><span class=n>new_var</span> <span class=o>=</span> <span class=n>old_var</span><span class=o>/</span><span class=m>2</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># select</span>
<span class=c1># create a subset of the dataframe with selected cols</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>select</span><span class=p>(</span><span class=n>col1</span><span class=p>,</span> <span class=n>col2</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># filter</span>
<span class=c1># keeps only rows that satisfy criteria</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>filter</span><span class=p>(</span><span class=n>var</span> <span class=o>==</span> <span class=s>&#34;some_val&#34;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># gather</span>
<span class=c1># key: name of new column</span>
<span class=c1># value: name of new column</span>
<span class=c1># ...: columns to collapse</span>
<span class=c1># collapse which col into key column</span>
<span class=c1># collapses value into value column</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>gather</span><span class=p>(</span><span class=n>key</span> <span class=o>=</span> <span class=s>&#34;key&#34;</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=s>&#34;value&#34;</span><span class=p>,</span> <span class=n>col1</span><span class=p>,</span> <span class=n>col2</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># group_by</span>
<span class=c1># creates &#34;groups&#34; of rows according to some column property</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>group_by</span><span class=p>(</span><span class=n>col_name</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># summarize</span>
<span class=c1># good for stats after you use group_by</span>
<span class=c1># creates new data frame</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>group_by</span><span class=p>(</span><span class=n>some_col</span><span class=p>)</span> <span class=o>%^%</span>
<span class=nf>summarize</span><span class=p>(</span><span class=n>new_stat</span> <span class=o>=</span> <span class=nf>min</span><span class=p>(</span><span class=n>some_other_col</span><span class=p>))</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># arrange</span>
<span class=c1># sorts low to high, use desc to sort high to low</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> <span class=nf>arrange</span><span class=p>(</span><span class=n>col_name</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># map_df</span>
<span class=c1># applies a function to each column</span>
<span class=n>data</span> <span class=o>&lt;-</span> <span class=n>data</span> <span class=o>%&gt;%</span> 
<span class=nf>map_df</span><span class=p>(</span><span class=n>max</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><h1 id=tidy-data>Tidy data</h1><p>data frame → rectangle where the rows are observations and columns are variables</p><p>satisfies</p><ol><li>each row is a single observation</li><li>each column is a single variable (e.g. no combined values like ratios)</li><li>each value is a single cell (i.e. row and column position is unique)</li></ol><p>COLUMNS SHOULD NOT STORE DATA (e.g. winner and runnerup should not be in separate columns)</p><p>Top 5 reasons why datasets are messy</p><ul><li>Column headers are values, not variable names.</li><li>Multiple variables are stored in one column.</li><li>Variables are stored in both rows and columns.</li><li>Multiple types of observational units are stored in the same table.</li><li>A single observational unit is stored in multiple tables.</li></ul><p><a href=https://tidyr.tidyverse.org/articles/tidy-data.html>https://tidyr.tidyverse.org/articles/tidy-data.html</a></p><h1 id=k-means>k-means</h1><h2 id=k-means-clustering>k-means clustering</h2><ol><li>pick some k</li><li>assign data to k different clusters randomly</li><li>iterate<ol><li>center update → calculate average for each cluster (using euclidian distance)</li><li>label update → re-assign the data to the closest cluster center</li><li>if no labels changed, finish (model has converged)</li></ol></li></ol><p>picking k</p><ul><li>choose elbow of total wssd vs k → i.e. not much increase by going from k to k+1</li></ul><p>explaining weird bumps</p><ul><li>k-means can get stuck in a bad local minimum (poor solution) → will find a bad clustering</li><li>fix → restart it a few times and pick the clustering with the lowest WSSD</li></ul><p>Advantages</p><ul><li>easy to implement and interpret</li><li>simple to understand</li><li>computationally more efficient than other clustering algorithms</li></ul><p>Disadvantages</p><ul><li>need to specify K</li><li>dependent on initialization</li><li>sensitive to scale of features (need to normalize/standardize)</li></ul><h2 id=k-means-1>k-means</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># get actual cluster model</span>
<span class=n>clust</span> <span class=o>&lt;-</span> <span class=nf>kmeans</span><span class=p>(</span><span class=n>some_data</span><span class=p>,</span> <span class=n>centers</span> <span class=o>=</span> <span class=m>3</span><span class=p>)</span>

<span class=c1># augment turns model + data to dataframe</span>
<span class=n>clust_df</span> <span class=o>&lt;-</span> <span class=nf>augment</span><span class=p>(</span><span class=n>clust</span><span class=p>,</span> <span class=n>some_data</span><span class=p>)</span>

<span class=c1># plot k-means</span>
<span class=n>clust_plot</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>clust_df</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>some_var</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>another_var</span><span class=p>,</span> <span class=n>colour</span> <span class=o>=</span> <span class=n>.cluster</span><span class=p>))</span> <span class=o>+</span>
  <span class=nf>geom_point</span><span class=p>()</span> <span class=o>+</span>
  <span class=nf>labs</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s>&#39;some_var&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s>&#39;another_var&#39;</span><span class=p>,</span> <span class=n>colour</span> <span class=o>=</span> <span class=s>&#39;Cluster&#39;</span><span class=p>)</span>

<span class=c1># get elbow stats</span>
<span class=n>elbow_stats</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>10</span><span class=p>)</span> <span class=o>%&gt;%</span>
  <span class=nf>mutate</span><span class=p>(</span><span class=n>pokemon_clusters</span> <span class=o>=</span> <span class=nf>map</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=o>~</span><span class=nf>kmeans</span><span class=p>(</span><span class=n>pm_numeric_data</span><span class=p>,</span> <span class=n>nstart</span> <span class=o>=</span> <span class=m>10</span><span class=p>,</span> <span class=n>.x</span><span class=p>)),</span>
         <span class=n>glanced</span> <span class=o>=</span> <span class=nf>map</span><span class=p>(</span><span class=n>pokemon_clusters</span><span class=p>,</span> <span class=n>glance</span><span class=p>))</span> <span class=o>%&gt;%</span>
  <span class=nf>select</span><span class=p>(</span><span class=o>-</span><span class=n>pokemon_clusters</span><span class=p>)</span> <span class=o>%&gt;%</span>
  <span class=nf>unnest</span><span class=p>(</span><span class=n>glanced</span><span class=p>)</span>

<span class=c1># elbow plot</span>
<span class=n>elbow_plot</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>clust_ks</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>k</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>tot.withinss</span><span class=p>))</span> <span class=o>+</span>
  <span class=nf>geom_point</span><span class=p>()</span> <span class=o>+</span>
  <span class=nf>geom_line</span><span class=p>()</span> <span class=o>+</span>
  <span class=nf>xlab</span><span class=p>(</span><span class=s>&#34;K&#34;</span><span class=p>)</span> <span class=o>+</span>
  <span class=nf>ylab</span><span class=p>(</span><span class=s>&#34;Total within-cluster sum of squares&#34;</span><span class=p>)</span><span class=o>+</span>
  <span class=nf>scale_x_continuous</span><span class=p>(</span><span class=n>breaks</span> <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>10</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>K-means, unlike the classification and regression models we studied in previous chapters, can get “stuck” in a bad solution. For example, if we were unlucky and initialized K-means with the following labels. To solve this problem when clustering data using K-means, we should randomly re-initialize the labels a few times, run K-means for each initialization, and pick the clustering that has the lowest final total WSSD.</p><h2 id=code-examples-of-k-means>Code examples of k-means</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=nf>set.seed</span><span class=p>(</span><span class=m>1234</span><span class=p>)</span>
<span class=n>data_clust</span> <span class=o>&lt;-</span> <span class=nf>kmeans</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>centers</span> <span class=o>=</span> <span class=m>3</span><span class=p>)</span> <span class=c1># k = 3</span>

<span class=c1># labels original data with clusters</span>
<span class=n>clustered_data</span> <span class=o>&lt;-</span> <span class=nf>augment</span><span class=p>(</span><span class=n>data_clust</span><span class=p>,</span> <span class=n>marketing_data</span><span class=p>)</span>

<span class=c1># plotting result</span>
<span class=n>cluster_plot</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>clustered_data</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=o>&lt;&gt;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=o>&lt;&gt;</span><span class=p>,</span> <span class=n>colour</span> <span class=o>=</span> <span class=n>.cluster</span><span class=p>),</span> <span class=n>size</span><span class=o>=</span><span class=m>2</span><span class=p>)</span> <span class=o>+</span>
  <span class=nf>geom_point</span><span class=p>()</span> <span class=o>+</span>
  <span class=nf>labs</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s>&#39;&lt;&gt;&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s>&#39;&lt;&gt;&#39;</span><span class=p>,</span> <span class=n>colour</span> <span class=o>=</span> <span class=s>&#39;Cluster&#39;</span><span class=p>)</span>

<span class=n>cluster_plot</span>

<span class=c1># getting total WSSD</span>
<span class=nf>glance</span><span class=p>(</span><span class=n>data_clust</span><span class=p>)</span>

<span class=c1>## # A tibble: 1 x 4</span>
<span class=c1>##   totss tot.withinss betweenss  iter</span>
<span class=c1>##   &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;</span>
<span class=c1>## 1  253.         41.8      211.     2</span>

<span class=c1># total WSSD for a variety of Ks</span>
<span class=n>clust_ks</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>9</span><span class=p>)</span> <span class=o>%&gt;%</span>
  <span class=nf>mutate</span><span class=p>(</span><span class=n>clusts</span> <span class=o>=</span> <span class=nf>map</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=o>~</span><span class=nf>kmeans</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>.x</span><span class=p>)),</span>
         <span class=n>glanced</span> <span class=o>=</span> <span class=nf>map</span><span class=p>(</span><span class=n>clusts</span> <span class=p>,</span> <span class=n>glance</span><span class=p>))</span> 
<span class=nf>head</span><span class=p>(</span><span class=n>clust_ks</span><span class=p>)</span>

<span class=c1>## # A tibble: 6 x 3</span>
<span class=c1>##       k marketing_clusts glanced         </span>
<span class=c1>##   &lt;int&gt; &lt;list&gt;           &lt;list&gt;          </span>
<span class=c1>## 1     1 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
<span class=c1>## 2     2 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
<span class=c1>## 3     3 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
<span class=c1>## 4     4 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
<span class=c1>## 5     5 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
<span class=c1>## 6     6 &lt;kmeans&gt;         &lt;tibble [1 × 4]&gt;</span>
</code></pre></td></tr></table></div></div><h1 id=inference>Inference</h1><p><strong>statistical inference</strong> → using a sample to make conclusions about the wider population where the sample was drawn from</p><p>allow us to make statements like: based on the results of the latest pole, we estimate that 47.2% of all Americans think that firearms should have strong regulations or restrictions when thinking about gun ownership rights and gun laws</p><p>A/B testing → which design will lead to higher customer engagement</p><p>randomly select a subset of the population (the sample) and ask. calculate a proportion using the sample to estimate the true population proportion</p><h2 id=bootstrap-sampling>Bootstrap sampling</h2><p>Uses the sample distribution as an estimate of the population distribution. <strong>bootstrapping</strong> is a resampling procedure that uses data from our one sample to generate a sampling distribution by repeatedly taking random samples from the known sample with replacement</p><p>generating a bootstrap sample</p><ol><li>randomly draw a bootstrap sample from the original sample with replacement</li><li>record bootstrap point estimate from the bootstrap sample</li><li>repeat 1 and 2 many times to create a bootstrap distribution</li><li>calculate the plausible range of values around our observed point estimate (confidence interval)</li></ol><p>bootstrap sample is centered around the original sample&rsquo;s mean</p><p>will not improve the quality of our estimate</p><p>spread of sampling and bootstrap distributions are about the same</p><p>—</p><ul><li><strong>point_estimate</strong> → a single number calculated from a random sample that estimates an unknown population parameter of interest</li><li><strong>population</strong> → the entire set of entities/objects of interest</li><li><strong>random sampling</strong> → selecting a subset of observations from a population where each observation is equally likely to be selected at any point during the selection process</li><li><strong>representative sampling</strong> → selecting a subset of observations from a population where the sample’s characteristics are a good representation of the population’s characteristics</li><li><strong>population parameter</strong> → a numerical summary value about the population</li><li><strong>sample</strong> → a collection of observations from a population</li><li><strong>observation</strong> → a quantity or a quality (or set of these) we collect from a given entity/object</li><li><strong>sampling distribution</strong> → a distribution of point estimates, where each point estimate was calculated from a different random sample from the same population</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># generate a population of size sample_size with p percent category B</span>
<span class=n>population_size</span> <span class=o>&lt;-</span> <span class=m>10000</span>
<span class=n>p</span> <span class=o>&lt;-</span> <span class=m>0.67</span>
<span class=n>population</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>id</span> <span class=o>=</span> <span class=nf>seq</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=n>population_size</span><span class=p>,</span> <span class=n>by</span><span class=o>=</span><span class=m>1</span><span class=p>),</span>
								 <span class=n>color</span> <span class=o>=</span> <span class=nf>factor</span><span class=p>(</span><span class=nf>rbinom</span><span class=p>(</span><span class=n>population_size</span><span class=p>,</span> <span class=m>1</span><span class=p>,</span> <span class=n>p</span><span class=p>),</span>
								 <span class=n>labels</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span> <span class=s>&#34;B&#34;</span><span class=p>)))</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># sanity check to check proportions</span>
<span class=n>population</span> <span class=o>%&gt;%</span> 
<span class=nf>group_by</span><span class=p>(</span><span class=n>color</span><span class=p>)</span> <span class=o>%&gt;%</span>
<span class=nf>summarize</span><span class=p>(</span><span class=n>n</span> <span class=o>=</span> <span class=nf>n</span><span class=p>(),</span>
					<span class=n>proportion</span> <span class=o>=</span> <span class=nf>n</span><span class=p>()</span> <span class=o>/</span> <span class=n>population_size</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># draw a single sample</span>
<span class=n>sample_size</span> <span class=o>&lt;-</span> <span class=m>40</span>
<span class=n>samples_1</span> <span class=o>&lt;-</span> <span class=nf>rep_sample_n</span><span class=p>(</span><span class=n>population</span><span class=p>,</span> <span class=n>size</span> <span class=o>=</span> <span class=n>sample_size</span><span class=p>,</span> <span class=n>reps</span> <span class=o>=</span> <span class=m>1</span><span class=p>)</span>

<span class=c1># alternate for if above doens&#39;t work</span>
<span class=n>one_sample</span> <span class=o>&lt;-</span> <span class=n>can_seniors</span> <span class=o>%&gt;%</span> 
    <span class=nf>rep_sample_n</span><span class=p>(</span><span class=m>40</span><span class=p>)</span> <span class=o>%&gt;%</span> 
    <span class=nf>ungroup</span><span class=p>()</span> <span class=o>%&gt;%</span> <span class=c1># ungroup the data frame </span>
    <span class=nf>select</span><span class=p>(</span><span class=n>age</span><span class=p>)</span> <span class=c1># drop the replicate column</span>

<span class=c1># get proportions</span>
<span class=n>props</span> <span class=o>&lt;-</span> <span class=nf>summarize</span><span class=p>(</span><span class=n>samples_1</span><span class=p>,</span> <span class=n>n</span> <span class=o>=</span> <span class=nf>sum</span><span class=p>(</span><span class=n>color</span> <span class=o>==</span> <span class=s>&#34;B&#34;</span><span class=p>),</span>
									 <span class=n>prop</span> <span class=o>=</span> <span class=nf>sum</span><span class=p>(</span><span class=n>color</span> <span class=o>==</span> <span class=s>&#34;B&#34;</span><span class=p>)</span> <span class=o>/</span> <span class=n>sample_size</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># histogram of sample</span>
<span class=n>pop_dist</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>can_seniors</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>age</span><span class=p>))</span> <span class=o>+</span> 
   <span class=nf>geom_histogram</span><span class=p>(</span><span class=n>binwidth</span> <span class=o>=</span> <span class=m>1</span><span class=p>)</span> <span class=o>+</span>
   <span class=nf>xlab</span><span class=p>(</span><span class=s>&#34;Age of senior&#34;</span><span class=p>)</span> <span class=o>+</span>
   <span class=nf>ggtitle</span><span class=p>(</span><span class=s>&#34;Population distribution&#34;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># calculate population parameters</span>
<span class=n>pop_parameters</span> <span class=o>&lt;-</span> <span class=n>can_seniors</span> <span class=o>%&gt;%</span>
<span class=nf>summarize</span><span class=p>(</span><span class=n>pop_mean</span> <span class=o>=</span> <span class=nf>mean</span><span class=p>(</span><span class=n>age</span><span class=p>),</span>
          <span class=n>pop_med</span> <span class=o>=</span> <span class=nf>median</span><span class=p>(</span><span class=n>age</span><span class=p>),</span>
          <span class=n>pop_sd</span> <span class=o>=</span> <span class=nf>sd</span><span class=p>(</span><span class=n>age</span><span class=p>))</span>

<span class=c1># calculate point estimates from sample (pretty much same code)</span>
<span class=n>sample_1_estimates</span> <span class=o>&lt;-</span> <span class=n>sample_1</span> <span class=o>%&gt;%</span>
<span class=nf>summarize</span><span class=p>(</span><span class=n>sample_1_mean</span> <span class=o>=</span> <span class=nf>mean</span><span class=p>(</span><span class=n>age</span><span class=p>),</span>
          <span class=n>sample_1_med</span> <span class=o>=</span> <span class=nf>median</span><span class=p>(</span><span class=n>age</span><span class=p>),</span>
          <span class=n>sample_1_sd</span> <span class=o>=</span> <span class=nf>sd</span><span class=p>(</span><span class=n>age</span><span class=p>))</span>
</code></pre></td></tr></table></div></div><p>The mean of the distribution of the bootstrap sample means is not the same value as the mean of the sampling distribution of the sample means because the bootstrap samples were drawn from the sample, whereas the samples that were used to create the sampling distribution were drawn from the population.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># 95% confidence interval</span>
<span class=n>boot1000_means</span> <span class=o>%&gt;%</span> 
    <span class=nf>select</span><span class=p>(</span><span class=n>mean</span><span class=p>)</span> <span class=o>%&gt;%</span> 
    <span class=nf>pull</span><span class=p>()</span> <span class=o>%&gt;%</span> 
    <span class=nf>quantile</span><span class=p>(</span><span class=nf>c</span><span class=p>(</span><span class=m>0.025</span><span class=p>,</span> <span class=m>0.975</span><span class=p>))</span>

<span class=c1># conclude</span>
<span class=c1># Our sample mean age for Canadian seniors was measured to </span>
<span class=c1># be 77.8 years, and we’re 95% “confident” that the true </span>
<span class=c1># population mean for Canadian seniors is between (73.7, 82.0).</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-r data-lang=r><span class=c1># all in one</span>
<span class=n>sampling_distribution_5</span> <span class=o>&lt;-</span> <span class=n>coffee_data</span> <span class=o>%&gt;%</span>
<span class=nf>rep_sample_n</span><span class=p>(</span><span class=n>size</span> <span class=o>=</span> <span class=m>5</span><span class=p>,</span> <span class=n>reps</span> <span class=o>=</span> <span class=m>1500</span><span class=p>)</span> <span class=o>%&gt;%</span>
<span class=nf>group_by</span><span class=p>(</span><span class=n>replicate</span><span class=p>)</span> <span class=o>%&gt;%</span>
<span class=nf>summarize</span><span class=p>(</span><span class=n>sample_mean</span> <span class=o>=</span> <span class=nf>mean</span><span class=p>(</span><span class=n>cups</span><span class=p>))</span> <span class=o>%&gt;%</span>
<span class=nf>ggplot</span><span class=p>(</span><span class=nf>aes</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=n>sample_mean</span><span class=p>))</span> <span class=o>+</span> 
   <span class=nf>geom_histogram</span><span class=p>(</span><span class=n>binwidth</span> <span class=o>=</span> <span class=m>1</span><span class=p>)</span> <span class=o>+</span>
   <span class=nf>xlab</span><span class=p>(</span><span class=s>&#34;Number of cups of coffe&#34;</span><span class=p>)</span> <span class=o>+</span>
   <span class=nf>ggtitle</span><span class=p>(</span><span class=s>&#34;Distribution of sample means&#34;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><ul id=sub-nav><li><a href=/>↳ (country roads) take me home</a></li></ul></div><div id=contact_buttons class=lt-centre><footer><p>made by Jacky Zhao, © 2021</p><a href=/>home</a>
<a href=https://github.com/jackyzha0/jackyzha0.github.io>source</a><a href=https://twitter.com/_jzhao>twitter</a></footer></div><script>const toggleSwitch=document.querySelector('#darkmode-toggle')
const userPref=window.matchMedia('(prefers-color-scheme: light)').matches?'light':'dark'
const currentTheme=localStorage.getItem('theme')??userPref
if(currentTheme){document.documentElement.setAttribute('saved-theme',currentTheme);if(currentTheme==='dark'){toggleSwitch.checked=true}}
const switchTheme=(e)=>{if(e.target.checked){document.documentElement.setAttribute('saved-theme','dark')
localStorage.setItem('theme','dark')}
else{document.documentElement.setAttribute('saved-theme','light')
localStorage.setItem('theme','light')}}
toggleSwitch.addEventListener('change',switchTheme,false)</script></body></html>